{"ast":null,"code":"import _defineProperty from\"/home/user/Desktop/IGR/tnega-pratik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/user/Desktop/IGR/tnega-pratik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/user/Desktop/IGR/tnega-pratik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/user/Desktop/IGR/tnega-pratik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/user/Desktop/IGR/tnega-pratik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import titleIcon from\"../../Assests/icon2/Bimg.svg\";import loginIcon from\"../../Assests/icon2/loginIcon.svg\";import captachImg from'../../Assests/icon2/captach.PNG';import SignIn_OTP from'./Otp';import{loginApi,OtpVerified,forgotApi}from'../../store/Login/action';import{bindActionCreators}from'redux';import{connect}from'react-redux';import Swal from'sweetalert2';import withReactContent from'sweetalert2-react-content';import signin_bannerImg from'../../Assests/icon/signin_bannerImg.png';import RCG from'react-captcha-generator';import{BsJustify}from'react-icons/bs';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import OTPInput,{ResendOTP}from\"otp-input-react\";import*as CryptoJS from'crypto-js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";toast.configure();var MySwal=withReactContent(Swal);var Forget_OTP=/*#__PURE__*/function(_Component){_inherits(Forget_OTP,_Component);var _super=_createSuper(Forget_OTP);function Forget_OTP(props){var _this;_classCallCheck(this,Forget_OTP);_this=_super.call(this,props);_this.validateOTP=function(){_this.props.history.push('/changePassword');};_this.handleOtpChange=function(event){console.log(event.target.value);_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.handleVerifyOTP=function(){var encryptconfigs={\"key\":\"t700#zkrF@db0705\",\"iv\":\"i700#zkrF@db0705\"};var key=CryptoJS.enc.Latin1.parse(encryptconfigs.key);var iv=CryptoJS.enc.Latin1.parse(encryptconfigs.iv);var encryptedData=CryptoJS.AES.encrypt(_this.state.otp,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});encryptedData=encryptedData.toString();console.log(encryptedData);var key=CryptoJS.enc.Latin1.parse(encryptconfigs.key);var iv=CryptoJS.enc.Latin1.parse(encryptconfigs.iv);var encryptedData1=CryptoJS.AES.encrypt(_this.props.location.state.email,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});encryptedData1=encryptedData1.toString();console.log(encryptedData1);if(_this.state.minutes!==0||_this.state.seconds!==0){console.log(\"otp verify\");var data={email:encryptedData1,otp:encryptedData};_this.props.OtpVerified(data);}else{MySwal.fire('Times Up').then(function(){return _this.props.history.push('/');});}};_this.handleOtpChange=function(event){console.log(event);_this.setState({otp:event});};_this.resendotp=function(){var data={email:_this.props.history.location.state.email};_this.props.forgotApi(data);};_this.state={email:'',booleanOTpPage:false,otp:\"\",minutes:3,seconds:0};return _this;}_createClass(Forget_OTP,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.props);if(this.props.history.location.state===undefined){this.props.history.push('/');}this.myInterval=setInterval(function(){var _this2$state=_this2.state,seconds=_this2$state.seconds,minutes=_this2$state.minutes;if(seconds>0){_this2.setState(function(_ref){var seconds=_ref.seconds;return{seconds:seconds-1};});}if(seconds===0){if(minutes===0){clearInterval(_this2.myInterval);}else{_this2.setState(function(_ref2){var minutes=_ref2.minutes;return{minutes:minutes-1,seconds:59};});}}},1000);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this3=this;//For Check OTP is verified  successfully or not\nif(prevProps.verify_otp!==this.props.verify_otp){console.log(this.props.verify_otp);MySwal.fire(this.props.verify_otp.message).then(function(){return _this3.props.history.push({pathname:'/ChangePassword',state:{token:_this3.props.verify_otp.token,email:_this3.props.location.state.email}});});}//For Verify OTP error message\nif(prevProps.VerifyOtp_err!==this.props.VerifyOtp_err){console.log(prevProps.VerifyOtp_err);toast.error('Invalid OTP');}}},{key:\"render\",value:function render(){var _this4=this,_jsx2;console.log(this.state);console.log(this.props);var _this$state=this.state,minutes=_this$state.minutes,seconds=_this$state.seconds;return/*#__PURE__*/_jsx(\"div\",{className:\"login-layout\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-sub-layout\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8  login-titleRow\",children:[/*#__PURE__*/_jsx(\"img\",{src:titleIcon}),\" \\xA0\\xA0\",/*#__PURE__*/_jsx(\"label\",{children:\"Blockchained Documents Of Registration\"}),/*#__PURE__*/_jsx(\"div\",{className:\" text\",children:\"All Tamil Nadu Registration documents secured by Tamil Nadu Blockchain backbone infrastructure.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-bannerImg\",children:[/*#__PURE__*/_jsx(\"img\",{src:signin_bannerImg}),\" \\xA0\\xA0\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-card-sub-layout\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 loginRow1\",children:[/*#__PURE__*/_jsx(\"img\",{src:loginIcon}),\" \\xA0\\xA0 \",/*#__PURE__*/_jsx(\"label\",{children:\"Enter OTP \"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12\",children:[/*#__PURE__*/_jsx(OTPInput,{value:this.state.otp,onChange:this.handleOtpChange,autoFocus:true,OTPLength:6,otpType:\"number\",disabled:false,secure:true}),/*#__PURE__*/_jsx(\"div\",{id:\"rsndOtp\",children:/*#__PURE__*/_jsx(\"a\",(_jsx2={style:{cursor:'pointer'},onClick:function onClick(){return _this4.resendotp();}},_defineProperty(_jsx2,\"style\",{color:'#377D22'}),_defineProperty(_jsx2,\"children\",\"Didn\\u2019t Receive Code Resend OTP?\"),_jsx2))}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5 mb-3 \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 \",style:{display:'flex'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this4.handleVerifyOTP();},className:\"login-submit\",type:\"submit\",style:{color:'white',backgroundColor:'#20570F',border:'none',borderRadius:'5px',padding:'5px 10px'},children:\"Log In\"}),minutes===0&&seconds===0?/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'15px',marginLeft:'10px',marginTop:'10px'},children:\"Times Up!\"}):/*#__PURE__*/_jsxs(\"h1\",{style:{fontSize:'15px',marginLeft:'10px',marginTop:'10px'},children:[\"Time Remaining: \",minutes,\":\",seconds<10?\"0\".concat(seconds):seconds]})]})})]})})]})})})]})})});}}]);return Forget_OTP;}(Component);var mapStateToProps=function mapStateToProps(state){console.log(state);return{login_res:state.login.otp_verify,login_res_err:state.login.otp_verify_error,verify_otp:state.login.verify_otp,forget_res:state.login.forget_response,forget_res_err:state.login.forget_res_err,VerifyOtp_err:state.login.verify_otp_err.data};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({loginApi:loginApi,OtpVerified:OtpVerified,forgotApi:forgotApi},dispatch);};export default connect(mapStateToProps,mapDispatchToProps)(Forget_OTP);","map":{"version":3,"sources":["/home/user/Desktop/IGR/tnega-pratik/src/Pages/AuthPages/ForgetOTP.js"],"names":["React","Component","captachImg","SignIn_OTP","loginApi","OtpVerified","forgotApi","bindActionCreators","connect","Swal","withReactContent","signin_bannerImg","RCG","BsJustify","toast","OTPInput","ResendOTP","CryptoJS","configure","MySwal","Forget_OTP","props","validateOTP","history","push","handleOtpChange","event","console","log","target","value","setState","name","handleVerifyOTP","encryptconfigs","key","enc","Latin1","parse","iv","encryptedData","AES","encrypt","state","otp","mode","CBC","padding","pad","Pkcs7","toString","encryptedData1","location","email","minutes","seconds","data","fire","then","resendotp","booleanOTpPage","undefined","myInterval","setInterval","clearInterval","prevProps","verify_otp","message","pathname","token","VerifyOtp_err","error","titleIcon","loginIcon","cursor","color","display","backgroundColor","border","borderRadius","fontSize","marginLeft","marginTop","mapStateToProps","login_res","login","otp_verify","login_res_err","otp_verify_error","forget_res","forget_response","forget_res_err","verify_otp_err","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport titleIcon from '../../Assests/icon2/Bimg.svg';\r\nimport loginIcon from '../../Assests/icon2/loginIcon.svg';\r\nimport captachImg from '../../Assests/icon2/captach.PNG';\r\nimport SignIn_OTP from './Otp';\r\nimport { loginApi , OtpVerified ,forgotApi} from '../../store/Login/action';\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport Swal from 'sweetalert2';\r\nimport withReactContent from 'sweetalert2-react-content';\r\nimport signin_bannerImg from '../../Assests/icon/signin_bannerImg.png'\r\nimport RCG from 'react-captcha-generator';\r\nimport { BsJustify } from 'react-icons/bs';\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport OTPInput, { ResendOTP } from \"otp-input-react\";\r\nimport * as CryptoJS from 'crypto-js'\r\n\r\ntoast.configure()\r\nconst MySwal = withReactContent(Swal);\r\n\r\nclass Forget_OTP extends Component{\r\n\r\n   \r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            email:'',\r\n            booleanOTpPage:false,\r\n            otp: \"\",\r\n            minutes: 3,\r\n            seconds: 0,\r\n        }\r\n    }\r\n\r\n    validateOTP=()=>{\r\n        this.props.history.push('/changePassword')\r\n    }\r\n\r\n    //OnChange function for OTP input Box\r\n    handleOtpChange = (event) => {\r\n        console.log(event.target.value);\r\n        this.setState({\r\n            [event.target.name]: event.target.value,\r\n        });\r\n    }\r\n\r\n    //Submit button function for Otp Verification\r\n    handleVerifyOTP=()=>{\r\n\r\n        const encryptconfigs = {\r\n            \"key\": \"t700#zkrF@db0705\",\r\n            \"iv\": \"i700#zkrF@db0705\"\r\n          }\r\n          \r\n          var key = CryptoJS.enc.Latin1.parse(encryptconfigs.key);\r\n              var iv = CryptoJS.enc.Latin1.parse(encryptconfigs.iv);\r\n              var encryptedData = CryptoJS.AES.encrypt(this.state.otp, key,{\r\n                iv: iv,\r\n                mode: CryptoJS.mode.CBC,\r\n                padding: CryptoJS.pad.Pkcs7,\r\n              });\r\n             \r\n              encryptedData = encryptedData.toString()\r\n              console.log(encryptedData)\r\n        \r\n\r\n              var key = CryptoJS.enc.Latin1.parse(encryptconfigs.key);\r\n              var iv = CryptoJS.enc.Latin1.parse(encryptconfigs.iv);\r\n              var encryptedData1= CryptoJS.AES.encrypt(this.props.location.state.email, key,{\r\n                iv: iv,\r\n                mode: CryptoJS.mode.CBC,\r\n                padding: CryptoJS.pad.Pkcs7,\r\n              });\r\n             \r\n              encryptedData1 = encryptedData1.toString()\r\n              console.log(encryptedData1)\r\n        \r\n        if(this.state.minutes !== 0 || this.state.seconds !== 0){\r\n        console.log(\"otp verify\");\r\n        const data={\r\n            email:encryptedData1,\r\n            otp: encryptedData\r\n        }\r\n        this.props.OtpVerified(data);\r\n        }else{\r\n            MySwal.fire('Times Up').then(() => this.props.history.push('/'))\r\n          }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log(this.props);\r\n        if(this.props.history.location.state === undefined){\r\n            this.props.history.push('/')\r\n        }\r\n        this.myInterval = setInterval(() => {\r\n            const { seconds, minutes } = this.state\r\n  \r\n            if (seconds > 0) {\r\n                this.setState(({ seconds }) => ({\r\n                    seconds: seconds - 1\r\n                }))\r\n            }\r\n            if (seconds === 0) {\r\n                if (minutes === 0) {\r\n                    clearInterval(this.myInterval)\r\n                } else {\r\n                    this.setState(({ minutes }) => ({\r\n                        minutes: minutes - 1,\r\n                        seconds: 59\r\n                    }))\r\n                }\r\n            } \r\n        }, 1000)\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n\r\n        //For Check OTP is verified  successfully or not\r\n       if(prevProps.verify_otp !== this.props.verify_otp){\r\n            console.log(this.props.verify_otp);\r\n            MySwal.fire(this.props.verify_otp.message)\r\n            .then(() =>\r\n                this.props.history.push({\r\n                    pathname: '/ChangePassword',\r\n                    state: {\r\n                        token: this.props.verify_otp.token,\r\n                        email:this.props.location.state.email,\r\n                    },\r\n                }),\r\n            )\r\n        }\r\n\r\n        //For Verify OTP error message\r\n        if(prevProps.VerifyOtp_err !== this.props.VerifyOtp_err){\r\n            console.log(prevProps.VerifyOtp_err)\r\n            toast.error('Invalid OTP');\r\n        }\r\n    }\r\n\r\n    handleOtpChange = (event) => {\r\n        console.log(event)\r\n        this.setState({\r\n            otp: event,\r\n        })\r\n    }\r\n    \r\n\r\n    resendotp = () => {\r\n        const data={\r\n          email:this.props.history.location.state.email,\r\n        }\r\n        this.props.forgotApi(data);\r\n      }\r\n    render(){\r\n        console.log(this.state);\r\n        console.log(this.props);\r\n        const { minutes, seconds } = this.state\r\n        return (\r\n            <div className='login-layout'>\r\n                <div className='login-sub-layout'>\r\n                    <div className='row mt-3'>\r\n                        <div className='col-md-8  login-titleRow'>\r\n                            <img src={titleIcon} /> &nbsp;&nbsp;\r\n                            <label>Blockchained Documents Of Registration</label>\r\n                            <div className=' text'>\r\n                                All Tamil Nadu Registration documents secured by Tamil Nadu Blockchain backbone infrastructure.\r\n                            </div>\r\n                        \r\n                            <div className='login-bannerImg'>\r\n                                <img src={signin_bannerImg} /> &nbsp;&nbsp;    \r\n                            </div>\r\n                        </div >              \r\n                        <div className='col-md-4'>\r\n                            <div className='login-card'>\r\n                                <div className='login-card-sub-layout'>\r\n                                    <div className='row'>\r\n                                        <div className='col-md-12 loginRow1'>\r\n                                            <img src={loginIcon} /> &nbsp;&nbsp; <label>Enter OTP </label>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className='col mt-4'>\r\n                                        <div className='col-md-12'>\r\n                                        <OTPInput value={this.state.otp} onChange={this.handleOtpChange} autoFocus OTPLength={6} otpType=\"number\" disabled={false} secure />\r\n                                        <div id=\"rsndOtp\" >\r\n                                            <a style={{cursor:'pointer'}} onClick={() => this.resendotp()} style={{color:'#377D22'}}>Didnâ€™t Receive Code Resend OTP?</a>\r\n                                        </div>\r\n                                        <div className='row mt-5 mb-3 '>\r\n                                            <div className='col-md-12 ' style={{display:'flex'}}>\r\n                                                <button  onClick={() => this.handleVerifyOTP()} className='login-submit' type=\"submit\" style={{color:'white',backgroundColor:'#20570F',border:'none',borderRadius:'5px',padding:'5px 10px'}}>Log In</button>\r\n                                                { minutes === 0 && seconds === 0\r\n                                                    ? <h1 style={{fontSize: '15px',marginLeft: '10px',marginTop: '10px'}}>Times Up!</h1>\r\n                                                    : <h1 style={{fontSize: '15px',marginLeft: '10px',marginTop: '10px'}}>Time Remaining: {minutes}:{seconds < 10 ? `0${seconds}` : seconds}</h1>\r\n                                                }\r\n                                            </div>\r\n                                        </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div> \r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    console.log(state)\r\n    return {\r\n        login_res: state.login.otp_verify,\r\n        login_res_err: state.login.otp_verify_error,\r\n        verify_otp: state.login.verify_otp,\r\n        forget_res: state.login.forget_response,\r\n        forget_res_err: state.login.forget_res_err,\r\n        VerifyOtp_err: state.login.verify_otp_err.data\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return bindActionCreators(\r\n        {\r\n            loginApi,\r\n            OtpVerified,\r\n            forgotApi,\r\n        },\r\n        dispatch,\r\n    )\r\n}\r\n  \r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps) (Forget_OTP);"]},"metadata":{},"sourceType":"module"}