{"ast":null,"code":"import _objectSpread from\"/home/user/Desktop/IGR/tnega-pratik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/user/Desktop/IGR/tnega-pratik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/user/Desktop/IGR/tnega-pratik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/user/Desktop/IGR/tnega-pratik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/user/Desktop/IGR/tnega-pratik/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import signin_bannerImg from'../../Assests/icon/signin_bannerImg.png';import Downlogo from'../../Assests/icon/downlogo.png';import titleIcon from\"../../Assests/icon2/Bimg.svg\";import loginIcon from\"../../Assests/icon2/loginIcon.svg\";import OTPInput,{ResendOTP}from\"otp-input-react\";import{bindActionCreators}from'redux';import{connect}from'react-redux';import{otpVerification}from'../../store/Login/action';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Swal from'sweetalert2';import withReactContent from'sweetalert2-react-content';import{loginApi}from'../../store/Login/action';import{CountdownCircleTimer}from'react-countdown-circle-timer';import*as CryptoJS from'crypto-js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";toast.configure();var MySwal=withReactContent(Swal);var SignIn_OTP=/*#__PURE__*/function(_Component){_inherits(SignIn_OTP,_Component);var _super=_createSuper(SignIn_OTP);function SignIn_OTP(props){var _this;_classCallCheck(this,SignIn_OTP);_this=_super.call(this,props);_this.handleOtpChange=function(event){console.log(event);_this.setState({otp:event});};_this.setErrors=function(error){return _this.setState({errors:_objectSpread(_objectSpread({},_this.state.errors),error)});};_this.handleSubmitOtp=function(){if(_this.state.minutes!==0||_this.state.seconds!==0){console.log(\"ok data\");var encryptconfigs={\"key\":\"t700#zkrF@db0705\",\"iv\":\"i700#zkrF@db0705\"};var key=CryptoJS.enc.Latin1.parse(encryptconfigs.key);var iv=CryptoJS.enc.Latin1.parse(encryptconfigs.iv);var encryptedData=CryptoJS.AES.encrypt(_this.state.otp,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});encryptedData=encryptedData.toString();console.log(encryptedData);// var key = CryptoJS.enc.Latin1.parse(encryptconfigs.key);\n// var iv = CryptoJS.enc.Latin1.parse(encryptconfigs.iv);\nvar encryptedDataemail=CryptoJS.AES.encrypt(_this.props.location.state.email,key,{iv:iv,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});encryptedDataemail=encryptedDataemail.toString();console.log(encryptedDataemail);var body={email:encryptedDataemail,otp:encryptedData};_this.props.otpVerification(body);}else{MySwal.fire('Times Up').then(function(){return _this.props.history.push('/');});}};_this.componentDidUpdate=function(prev){if(prev.otpVerify!==_this.props.otpVerify){if(_this.props.otpVerify.status==true){console.log(_this.props.otpVerify.user);if(_this.props.otpVerify.user.role=='SRO'){localStorage.setItem('auth_token',_this.props.otpVerify.user.token);localStorage.setItem('refresh_token',_this.props.otpVerify.user.refreshtoken);toast.success('Login Successful');_this.props.history.push({pathname:'/registration-dashboard4',state:{role:_this.props.otpVerify.user.role,zone:_this.props.otpVerify.user.Zone,district:_this.props.otpVerify.user.District,SRO:_this.props.otpVerify.user.SRO}});}if(_this.props.otpVerify.user.role=='DRO'){localStorage.setItem('auth_token',_this.props.otpVerify.user.token);localStorage.setItem('refresh_token',_this.props.otpVerify.user.refreshtoken);toast.success('Login Successful');_this.props.history.push({pathname:'/registration-dashboard2',state:{role:_this.props.otpVerify.user.role,zone:_this.props.otpVerify.user.Zone,district:_this.props.otpVerify.user.District}});}if(_this.props.otpVerify.user.role=='DIG'){localStorage.setItem('auth_token',_this.props.otpVerify.user.token);console.log(_this.props.otpVerify.user);localStorage.setItem('refresh_token',_this.props.otpVerify.user.refreshtoken);toast.success('Login Successful');_this.props.history.push({pathname:'/registration-dashboard3',state:{role:_this.props.otpVerify.user.role,zone:_this.props.otpVerify.user.Zone,district:_this.props.otpVerify.user.District}});}if(_this.props.otpVerify.user.role=='IGR'){localStorage.setItem('auth_token',_this.props.otpVerify.user.token);console.log(_this.props.otpVerify.user);localStorage.setItem('refresh_token',_this.props.otpVerify.user.refreshtoken);toast.success('Login Successful');_this.props.history.push({pathname:'/registration-dashboard',state:{role:_this.props.otpVerify.user.role}});}if(_this.props.otpVerify.user.role=='admin'){localStorage.setItem('auth_token',_this.props.otpVerify.user.token);console.log(_this.props.otpVerify.user);localStorage.setItem('refresh_token',_this.props.otpVerify.user.refreshtoken);toast.success('Login Successful');_this.props.history.push({pathname:'/registration-dashboard',state:{role:_this.props.otpVerify.user.role,data:\"Login\"}});}}}// if(prev.otp_verify_error !== this.props.otp_verify_error){\n//   console.log(this.props.otp_verify_error)\n// MySwal.fire('Invalid otp')\n// }\n};_this.resendotp=function(){var data={email:_this.props.history.location.state.email,password:_this.props.history.location.state.pass};_this.props.loginApi(data);};_this.state={otp:\"\",timmer:'',time:new Date().toLocaleString(),valid:false,data:'',minutes:3,seconds:0};return _this;}_createClass(SignIn_OTP,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.props);if(this.props.history.location.state===undefined){this.props.history.push('/');}this.myInterval=setInterval(function(){var _this2$state=_this2.state,seconds=_this2$state.seconds,minutes=_this2$state.minutes;if(seconds>0){_this2.setState(function(_ref){var seconds=_ref.seconds;return{seconds:seconds-1};});}if(seconds===0){if(minutes===0){clearInterval(_this2.myInterval);}else{_this2.setState(function(_ref2){var minutes=_ref2.minutes;return{minutes:minutes-1,seconds:59};});}}},1000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.myInterval);}},{key:\"render\",value:function render(){var _this3=this;console.log(this.state);var _this$state=this.state,minutes=_this$state.minutes,seconds=_this$state.seconds;return/*#__PURE__*/_jsx(\"div\",{className:\"login-layout\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-sub-layout\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7  login-titleRow\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:titleIcon}),\" \\xA0\\xA0\",/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'19px'},children:\"Blockchained Documents Of Registration\"}),/*#__PURE__*/_jsx(\"div\",{className:\" text\",id:\"text\",style:{fontSize:'17px',width:'76%'},children:\"All Tamil Nadu Registration documents secured by Tamil Nadu Blockchain backbone infrastructure.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-bannerImg\",children:[/*#__PURE__*/_jsx(\"img\",{src:signin_bannerImg,id:\"sideImg\"}),\" \\xA0\\xA0\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-card-sub-layout\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 loginRow1\",children:[/*#__PURE__*/_jsx(\"img\",{src:loginIcon}),\" \\xA0\\xA0 \",/*#__PURE__*/_jsx(\"label\",{style:{color:'#292828D8',fontSize:'19px',fontWeight:'bold'},children:\"Sign In\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"label\",{style:{color:'#292828D8',fontSize:'17px',marginTop:'40px',fontWeight:'600'},children:\"Enter OTP from your Registered Email Id?\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",style:{marginTop:'30px'},children:/*#__PURE__*/_jsx(\"div\",{id:\"OtpBox\",children:/*#__PURE__*/_jsx(OTPInput,{value:this.state.otp,onChange:this.handleOtpChange,autoFocus:true,OTPLength:6,otpType:\"number\",disabled:false,secure:true})})}),/*#__PURE__*/_jsx(\"div\",{id:\"rsndOtp\",children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return _this3.resendotp();},style:{color:'#377D22',fontSize:'17px'},children:\"Didn\\u2019t Receive Code Resend OTP?\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5 mb-3 \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 \",style:{display:'flex'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this3.handleSubmitOtp();},className:\"login-submit\",type:\"submit\",style:{color:'white',backgroundColor:'#20570F',border:'none',borderRadius:'5px',padding:'5px 10px',fontWeight:'bold'},children:\"Log In\"}),minutes===0&&seconds===0?/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'17px',marginLeft:'10px',marginTop:'10px'},children:\"Times Up !\"}):/*#__PURE__*/_jsxs(\"h1\",{style:{fontSize:'17px',marginLeft:'10px',marginTop:'10px'},children:[\"Time Remaining: \",minutes,\":\",seconds<10?\"0\".concat(seconds):seconds]})]})})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",style:{marginTop:'2%',marginLeft:'40%'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(\"img\",{src:Downlogo,style:{height:'25px'}}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'13px',marginLeft:'1%'},children:\"Powered By Nambikkai Inaiyam\"})]})})]})});}}]);return SignIn_OTP;}(Component);var mapStateToProps=function mapStateToProps(state){console.log(state);return{otpVerify:state.login.otp_verify,otp_verify_error:state.login.otp_verify_error};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({otpVerification:otpVerification,loginApi:loginApi},dispatch);};// export default Login;\nexport default connect(mapStateToProps,mapDispatchToProps)(SignIn_OTP);","map":{"version":3,"sources":["/home/user/Desktop/IGR/tnega-pratik/src/Pages/AuthPages/Otp.js"],"names":["React","Component","signin_bannerImg","Downlogo","OTPInput","ResendOTP","bindActionCreators","connect","otpVerification","toast","Swal","withReactContent","loginApi","CountdownCircleTimer","CryptoJS","configure","MySwal","SignIn_OTP","props","handleOtpChange","event","console","log","setState","otp","setErrors","error","errors","state","handleSubmitOtp","minutes","seconds","encryptconfigs","key","enc","Latin1","parse","iv","encryptedData","AES","encrypt","mode","CBC","padding","pad","Pkcs7","toString","encryptedDataemail","location","email","body","fire","then","history","push","componentDidUpdate","prev","otpVerify","status","user","role","localStorage","setItem","token","refreshtoken","success","pathname","zone","Zone","district","District","SRO","data","resendotp","password","pass","timmer","time","Date","toLocaleString","valid","undefined","myInterval","setInterval","clearInterval","titleIcon","fontSize","width","loginIcon","color","fontWeight","marginTop","display","backgroundColor","border","borderRadius","marginLeft","height","mapStateToProps","login","otp_verify","otp_verify_error","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport signin_bannerImg from '../../Assests/icon/signin_bannerImg.png'\r\nimport Downlogo from '../../Assests/icon/downlogo.png'\r\nimport titleIcon from '../../Assests/icon2/Bimg.svg'\r\nimport loginIcon from '../../Assests/icon2/loginIcon.svg'\r\nimport OTPInput, { ResendOTP } from \"otp-input-react\";\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport {otpVerification} from '../../store/Login/action'\r\nimport {toast} from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Swal from 'sweetalert2'\r\nimport withReactContent from 'sweetalert2-react-content'\r\nimport { loginApi } from '../../store/Login/action'\r\nimport { CountdownCircleTimer } from 'react-countdown-circle-timer'\r\nimport * as CryptoJS from 'crypto-js'\r\n\r\ntoast.configure()\r\nconst MySwal = withReactContent(Swal);\r\n\r\nclass SignIn_OTP extends Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            otp: \"\",\r\n            timmer: '',\r\n            time: new Date().toLocaleString(),\r\n            valid: false,\r\n            data:'',\r\n            minutes: 3,\r\n            seconds: 0,\r\n        }\r\n    }\r\n\r\n   \r\n\r\n    componentDidMount() {\r\n        console.log(this.props)\r\n        if(this.props.history.location.state === undefined){\r\n          this.props.history.push('/')\r\n        }\r\n        this.myInterval = setInterval(() => {\r\n          const { seconds, minutes } = this.state\r\n\r\n          if (seconds > 0) {\r\n              this.setState(({ seconds }) => ({\r\n                  seconds: seconds - 1\r\n              }))\r\n          }\r\n          if (seconds === 0) {\r\n              if (minutes === 0) {\r\n                  clearInterval(this.myInterval)\r\n              } else {\r\n                  this.setState(({ minutes }) => ({\r\n                      minutes: minutes - 1,\r\n                      seconds: 59\r\n                  }))\r\n              }\r\n          } \r\n      }, 1000)\r\n    }\r\n\r\n\r\n    handleOtpChange = (event) => {\r\n        console.log(event)\r\n        this.setState({\r\n            otp: event,\r\n        })\r\n    }\r\n \r\n\r\nsetErrors = error =>\r\n  this.setState({\r\n    errors: { ...this.state.errors, ...error }\r\n  });\r\n\r\n  handleSubmitOtp=()=>{\r\n    if(this.state.minutes !== 0 || this.state.seconds !== 0){\r\n      console.log(\"ok data\")\r\n      const encryptconfigs = {\r\n        \"key\": \"t700#zkrF@db0705\",\r\n        \"iv\": \"i700#zkrF@db0705\"\r\n      }\r\n      \r\n      var key = CryptoJS.enc.Latin1.parse(encryptconfigs.key);\r\n          var iv = CryptoJS.enc.Latin1.parse(encryptconfigs.iv);\r\n          var encryptedData = CryptoJS.AES.encrypt(this.state.otp, key,{\r\n            iv: iv,\r\n            mode: CryptoJS.mode.CBC,\r\n            padding: CryptoJS.pad.Pkcs7,\r\n          });\r\n         \r\n          encryptedData = encryptedData.toString()\r\n          console.log(encryptedData)\r\n\r\n          // var key = CryptoJS.enc.Latin1.parse(encryptconfigs.key);\r\n          // var iv = CryptoJS.enc.Latin1.parse(encryptconfigs.iv);\r\n          var encryptedDataemail = CryptoJS.AES.encrypt(this.props.location.state.email, key,{\r\n            iv: iv,\r\n            mode: CryptoJS.mode.CBC,\r\n            padding: CryptoJS.pad.Pkcs7,\r\n          });\r\n\r\n          encryptedDataemail = encryptedDataemail.toString()\r\n          console.log(encryptedDataemail)\r\n      \r\n      const body={\r\n          email: encryptedDataemail,\r\n          otp : encryptedData\r\n      }\r\n      this.props.otpVerification(body)   \r\n    }else{\r\n      MySwal.fire('Times Up').then(() => this.props.history.push('/'))\r\n    }\r\n  }\r\n\r\n    componentDidUpdate = (prev) => {\r\n      if(prev.otpVerify !== this.props.otpVerify){\r\n        if (this.props.otpVerify.status == true) {\r\n          console.log(this.props.otpVerify.user)\r\n          if (this.props.otpVerify.user.role == 'SRO') {\r\n              localStorage.setItem('auth_token', this.props.otpVerify.user.token)\r\n              localStorage.setItem('refresh_token', this.props.otpVerify.user.refreshtoken)\r\n              toast.success('Login Successful');\r\n              this.props.history.push({\r\n                pathname: '/registration-dashboard4',\r\n                state: {\r\n                  role: this.props.otpVerify.user.role,\r\n                  zone: this.props.otpVerify.user.Zone,\r\n                  district: this.props.otpVerify.user.District,\r\n                  SRO: this.props.otpVerify.user.SRO,\r\n                },\r\n              })\r\n          }\r\n          if (this.props.otpVerify.user.role == 'DRO') {\r\n              localStorage.setItem('auth_token', this.props.otpVerify.user.token)\r\n              localStorage.setItem('refresh_token', this.props.otpVerify.user.refreshtoken)\r\n              toast.success('Login Successful');\r\n              this.props.history.push({\r\n                pathname: '/registration-dashboard2',\r\n                state: {\r\n                  role: this.props.otpVerify.user.role,\r\n                  zone: this.props.otpVerify.user.Zone,\r\n                  district: this.props.otpVerify.user.District,\r\n                },\r\n              })\r\n          }\r\n          if (this.props.otpVerify.user.role == 'DIG') {\r\n              localStorage.setItem('auth_token', this.props.otpVerify.user.token)\r\n              console.log(this.props.otpVerify.user)\r\n              localStorage.setItem('refresh_token', this.props.otpVerify.user.refreshtoken)\r\n              toast.success('Login Successful');\r\n              this.props.history.push({\r\n                pathname: '/registration-dashboard3',\r\n                state: {\r\n                  role: this.props.otpVerify.user.role,\r\n                  zone: this.props.otpVerify.user.Zone,\r\n                  district: this.props.otpVerify.user.District,\r\n                },\r\n              })\r\n          }\r\n          if (this.props.otpVerify.user.role == 'IGR') {\r\n              localStorage.setItem('auth_token', this.props.otpVerify.user.token)\r\n              console.log(this.props.otpVerify.user)\r\n              localStorage.setItem('refresh_token', this.props.otpVerify.user.refreshtoken)\r\n              toast.success('Login Successful');\r\n              this.props.history.push({\r\n                pathname: '/registration-dashboard',\r\n                state: { role: this.props.otpVerify.user.role },\r\n              })\r\n          }\r\n          if (this.props.otpVerify.user.role == 'admin') {\r\n              localStorage.setItem('auth_token', this.props.otpVerify.user.token)\r\n              console.log(this.props.otpVerify.user)\r\n              localStorage.setItem('refresh_token', this.props.otpVerify.user.refreshtoken)\r\n              toast.success('Login Successful');\r\n              this.props.history.push({\r\n                pathname: '/registration-dashboard',\r\n                state: { role: this.props.otpVerify.user.role,data:\"Login\" },\r\n              })\r\n          }\r\n          \r\n          \r\n        }\r\n      }\r\n      // if(prev.otp_verify_error !== this.props.otp_verify_error){\r\n      //   console.log(this.props.otp_verify_error)\r\n      // MySwal.fire('Invalid otp')\r\n      // }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      clearInterval(this.myInterval)\r\n  }\r\n\r\n    resendotp = () => {\r\n      const data={\r\n        email:this.props.history.location.state.email,\r\n        password:this.props.history.location.state.pass\r\n      }\r\n      this.props.loginApi(data);\r\n    }\r\n\r\n    render(){\r\n      \r\n      console.log(this.state)\r\n      const { minutes, seconds } = this.state\r\n        return (\r\n            <div className='login-layout'>\r\n            <div className='login-sub-layout'>\r\n              <div className='row mt-3'>\r\n                <div className='col-md-7  login-titleRow'>\r\n                  <div>\r\n                  <img src={titleIcon} /> &nbsp;&nbsp;\r\n                  <label style={{fontSize:'19px'}}>Blockchained Documents Of Registration</label>\r\n                  <div className=' text' id=\"text\" style={{fontSize:'17px',width:'76%'}}>\r\n                    All Tamil Nadu Registration documents secured by Tamil Nadu Blockchain backbone infrastructure.\r\n                  </div>\r\n                  <div className='login-bannerImg'>\r\n                    <img src={signin_bannerImg}  id=\"sideImg\"/> &nbsp;&nbsp;    \r\n                  </div>\r\n                  </div>\r\n                </div >\r\n                <div className='col-md-5'>\r\n                  <div className='login-card'>\r\n                    <div className='login-card-sub-layout'>\r\n                        <div className='row'>\r\n                            <div className='col-md-12 loginRow1'>\r\n                                <img src={loginIcon} /> &nbsp;&nbsp; <label style={{color:'#292828D8',fontSize:'19px',fontWeight:'bold'}}>Sign In</label>\r\n                            </div>\r\n                        </div>\r\n                        <div className='row'>\r\n                            <div className='col-md-12'>\r\n                                <label style={{color:'#292828D8',fontSize:'17px',marginTop:'40px',fontWeight:'600'}}>Enter OTP from your Registered Email Id?</label>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"row\" style={{marginTop:'30px'}}>                            \r\n                            <div id=\"OtpBox\"><OTPInput value={this.state.otp} onChange={this.handleOtpChange} autoFocus OTPLength={6} otpType=\"number\" disabled={false} secure /></div>\r\n                        </div>\r\n                        <div id=\"rsndOtp\" >\r\n                          <a onClick={() => this.resendotp()} style={{color:'#377D22',fontSize:'17px'}}>Didnâ€™t Receive Code Resend OTP?</a>\r\n                        </div>\r\n                        <div className='row mt-5 mb-3 '>\r\n                            <div className='col-md-12 ' style={{display:'flex'}}>\r\n                                <button  onClick={() => this.handleSubmitOtp()} className='login-submit' type=\"submit\" style={{color:'white',backgroundColor:'#20570F',border:'none',borderRadius:'5px',padding:'5px 10px',fontWeight:'bold'}}>Log In</button>\r\n                                \r\n                                { minutes === 0 && seconds === 0\r\n                                    ? <h1 style={{fontSize: '17px',marginLeft: '10px',marginTop: '10px'}}>Times Up\r\n                                    !</h1>\r\n                                    : <h1 style={{fontSize: '17px',marginLeft: '10px',marginTop: '10px'}}>Time Remaining: {minutes}:{seconds < 10 ? `0${seconds}` : seconds}</h1>\r\n                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                  </div>\r\n                </div> \r\n              </div>\r\n              <div className=\"row\" style={{marginTop:'2%',marginLeft:'40%'}}>                    \r\n                <div style={{display: 'flex'}}>\r\n                  <img src={Downlogo} style={{height:'25px'}}/>\r\n                  <p style={{fontSize:'13px',marginLeft:'1%'}}>Powered By Nambikkai Inaiyam</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    console.log(state)\r\n    return {\r\n      otpVerify:state.login.otp_verify,\r\n      otp_verify_error: state.login.otp_verify_error\r\n    }\r\n  }\r\n  \r\n  const mapDispatchToProps = (dispatch) => {\r\n    return bindActionCreators(\r\n      {\r\n        otpVerification,\r\n        loginApi\r\n      },\r\n      dispatch,\r\n    )\r\n  }\r\n  \r\n  // export default Login;\r\n  export default connect(mapStateToProps, mapDispatchToProps)(SignIn_OTP)\r\n  \r\n"]},"metadata":{},"sourceType":"module"}